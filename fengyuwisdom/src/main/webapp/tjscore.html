<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>锋豫智慧平台</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="lib/layui-v2.6.3/css/layui.css" media="all">
		<link rel="stylesheet" href="css/public.css" media="all">
		<!-- 1.引入js库 -->
		<script src="https://cdn.jsdelivr.net/npm/echarts@5.1.2/dist/echarts.min.js"></script>
		<script src="lib/jquery-3.4.1/jquery-3.4.1.min.js" charset="utf-8"></script>
	</head>
	<body>
	<div class="layuimini-container">
		<div class="layuimini-main">
			<div class="layui-col-lg-offset1 layui-col-lg5" id="scoreday" style="height: 350px;width: 80%">
			</div>
			<div class="layui-col-lg-offset1 layui-col-lg5" id="scoreweek" style="height: 350px;width: 80%">
			</div>
			<div class="layui-col-lg-offset1 layui-col-lg5" id="scorestage" style="height: 350px;width: 80%">
			</div>
		</div>
	</div>
	<script src="lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
	<script>
		$(function (){
			$.ajax({
				url:"/statistics/score/day.do",
				type:"GET",
				success:function (data){
					var scoreDay = data.data.scoreDay;
					getScoreDay(scoreDay);
				}
			})
			$.ajax({
				url:"/statistics/score/week.do",
				type:"GET",
				success:function (data){
					var scoreWeek = data.data.scoreWeek;
					getScoreWeek(scoreWeek);
				}
			})
			$.ajax({
				url:"/statistics/score/stage.do",
				type:"GET",
				success:function (data){
					var scoreStage = data.data.scoreStage;
					getScoreStage(scoreStage);
				}
			})
		})

		function getScoreDay(scoreDay){
			var chartDom = document.getElementById('scoreday');
			var myChart = echarts.init(chartDom);
			var option;
			option = {
				title: {
					text: '学生日考成绩',
					textStyle: {
						color: 'black'
					},
					padding: [0, 0, 10, 0]  // 位置
				},
				legend: {},
				tooltip: {},
				dataset: {
					source: scoreDay
				},
				xAxis: [
					{ type: 'category', gridIndex: 0 },
					{ type: 'category', gridIndex: 1 }
				],
				yAxis: [{ gridIndex: 0 }, { gridIndex: 1 }],
				grid: [{ bottom: '55%' }, { top: '55%' }],
				series: [
					// These series are in the first grid.
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					// These series are in the second grid.
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
				]
			};
			option && myChart.setOption(option);
		}
		function getScoreWeek(scoreWeek){
			var chartDom = document.getElementById('scoreweek');
			var myChart = echarts.init(chartDom);
			var option;

			option = {
				title: {
					text: '学生周考成绩',
					textStyle: {
						color: 'black'
					},
					padding: [0, 0, 10, 0]  // 位置
				},
				legend: {},
				tooltip: {},
				dataset: {
					source:scoreWeek
				},
				xAxis: [
					{ type: 'category', gridIndex: 0 },
					{ type: 'category', gridIndex: 1 }
				],
				yAxis: [{ gridIndex: 0 }, { gridIndex: 1 }],
				grid: [{ bottom: '55%' }, { top: '55%' }],
				series: [
					// These series are in the first grid (学生个数x轴).
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					// These series are in the second grid.
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
				]
			};
			option && myChart.setOption(option);
		}
		function getScoreStage(scoreStage){
			var chartDom = document.getElementById('scorestage');
			var myChart = echarts.init(chartDom);
			var option;

			option = {
				title: {
					text: '学生阶段考试成绩',
					textStyle: {
						color: 'black'
					},
					padding: [0, 0, 10, 0]  // 位置
				},
				legend: {},
				tooltip: {},
				dataset: {
					source:scoreStage
				},
				xAxis: [
					{ type: 'category', gridIndex: 0 },
					{ type: 'category', gridIndex: 1 }
				],
				yAxis: [{ gridIndex: 0 }, { gridIndex: 1 }],
				grid: [{ bottom: '55%' }, { top: '55%' }],
				series: [
					// These series are in the first grid (学生个数x轴).
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					{ type: 'bar', seriesLayoutBy: 'row' },
					// These series are in the second grid.
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
					{ type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
				]
			};
			option && myChart.setOption(option);
		}
	</script>
	</body>
</html>
